<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Verifying...</title>
	<link rel="stylesheet" href="./css/hk.css">
	<script type="text/javascript" src="https://open.mobile.qq.com/sdk/qqapi.js?_bid=100"></script><script>mqq.ui.setTitleButtons({right:{iconID:3,callback:function(){alert('好牛逼呀，想举报吗？不存在的！你个弟弟！');}}}); </script>
	<!--[if IE]>
	<script src="https://www.zhangxinxu.com/wordpress/2018/08/js-base64-atob-btoa-encode-decode/base64-polyfill.js"></script>
	<![endif]-->
</head>
<body bgcolor ="#000000">
	<div id="main" class="main" style="display:blocked;">
		<div class="circle"></div>
		<h1 id="second">Loading</h1>
		<p class="title">猫猫图床中间页</p>
		<p id="text" class="text">正在检查您的浏览器</p>
	</div>
	<script>
		window.onload = function () {
			if (document.cookie == "") {
				document.getElementById("text").innerHTML="初次访问人机验证时间较长请耐心等待";
				wait (16,function () {
					document.cookie = "nofirst=true";
					document.getElementById("main").style.display="none";
					st_load ();
				});	
				return;
			}
			wait (4,function () {
				st_load ();
			});
		}
		function st_load(){
			document.getElementById("main").style.display="none";
			showImg('https://i.pixiv.re/img-original/img/' + window.atob(getQueryString('sec')));
			document.title= 'catsecret://pixiv/img-original/img/' + window.atob(getQueryString('sec'))
			history.pushState(state,'','/');
		}
		function showImg(url){
			var body = document.getElementsByTagName("body");
			var div = document.createElement("div");
			div.style = ' overflow: hidden;position: relative;';
			div.innerHTML = '<img src="' + url + '">'//'<iframe id="idFrame" name="idFrame" src="' + url + '" height = "100%" width = "100%" frameborder="0" scrolling="auto" style="border: none;display: block;margin: 0 auto;"></iframe>';
			document.body.appendChild(div);
		}
		function getQueryString(name) {
			const url_string = window.location.href
			const url = new URL(url_string);
			return url.searchParams.get(name);
		}
	</script>
	<script>
		function wait(setsec,func){
			var sec = document.getElementById("second");
			var i = setsec;//设置定时时间
			var timer = setInterval(function(){
				i--;
				sec.innerHTML = i+"s";
				if(i==0){
					func ();
				}
			},1000);
		}
	</script>
	<frameset rows="*" framespacing="0" border="0" frameborder="0">
	</frameset>
</body>
</html>